import App from './App.vue'
import path from 'path'
export default ({editor, store, view, packageInfo, baseClass}) => {
  let isCreated = false
  // add item to toolbar
  store.dispatch('toolbar/addItem', {
    name: 'qrcode',
    desc: 'qrcode tool',
    key: 'videPluginToolbarQrcodeItem',
    icon: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSgBBwcHCggKEwoKEygaFhooKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKP/AABEIAGMAZAMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APozxt4p03wZ4cudb1ppVsbcqHMSb2+ZgowPqRQB5h/w0x8Pf+e2qf8AgGf8aAD/AIaY+Hv/AD21T/wDP+NAB/w0x8Pf+e2qf+AZ/wAaAPQfh34+0X4gaXcah4ea4a2gm8hzPF5Z3bQ3T6MKAKXj74n+HfAmpafY6890s98Mw+TDvB5xyc8cmgDtBMph83nbt3fhQBxfgL4n+HfHOrajp2hPdNc2AzMJodgHzbeDnnmgDldT/aL8B6bqV3Y3UupC4tZngkC2pI3KxBwc+ooAq/8ADTHw9/57ap/4Bn/GgA/4aY+Hv/PbVP8AwDP+NAG34O+Ofg3xf4itdF0eW/a+ud3liW2KLwCTk59AaAPJv25/+ZJ/7fv/AG3oA9Q/ap/5Ilrf/XS3/wDRyUAecfCLwZ8PE+Bll4s8aaNbyiPzWubphIzYExRflU89hwKAE/tz9m//AJ8rf/wEu/8ACgDY1Lwh8KfEfwm8TeI/Bui2zraWlyIrjZNGUlSLdwHI6ZB6YoAp/sipdv8ACDxUmmki+a8mFuQQMSfZ028njrjrQBR0hrbSLqOP9o4fadZlkU6QZQZyqZ+bBgyB82PvUAek/Gyw+Id9Fo3/AArOV44xu+1bZYkyvG3/AFn49KAOu8DeBdC8KBrvS9KhstSuoVW7kRiTI3U5ySPvZ6UAfLvwU8K6J4u+O/jWx8R6fFf2kQvJ0jkJADi6QA8EdmP50AdzrNz+zzo2r3umajp1vFe2cz286C2um2upIYZAweR2oAv+DrL4DeMddj0jw9pNtc38iM6xmC5jyFGTy2B0oA4Pwto2n6B+1+umaPbJa2FvIwihQkhQbfJ689SaANn9uf8A5kn/ALfv/begD1D9qn/kiWt/9dLf/wBHJQB5tpH/ACZNd/8AXKT/ANK6APk6gD6x+CH/ACan41+mof8ApOtAF39kQ3g+EPir+y8/b/tsv2fGP9Z9nTb146468UAbHgTwJrXi63u9R+PGmm7vtPcGwkaZI/LjA3NxbMAeR/Fk0Acv8bPj0Lc6RH8MvEwARnW8AswcAY2/66P69KAPcfh18RvDnjaIW2h6st9f29ukl0ohkj2k4BPzKB19KAPAP2aP+TiPHX/XG9/9K46APDvi/wD8lW8Yf9he6/8ARrUAdv8Askf8losP+vW4/wDQKAO6tP8Ak9WX/rq3/pNQBa/bn/5kn/t+/wDbegD1D9qn/kiWt/8AXS3/APRyUAed/CLxX8Pp/gRZ+FPGWuWluJfNW5tmkZHA84uOQOOxoAi/4RX9nX/oMQ/+B81AG5f+JvhZ4Y+Efifw54P1+023dnctHAZnkZ5Xi24BYd8CgDL/AGTruWw+C/jC8tiFnt7qeWMkZAZbdCOPqKAOG0L4rfGbxbp18+iRrf2kKlLh4bGLCAg9ePSgCt+zX8O/D/j6TxEfFFrNM9oEaPy5mjwTuznaeelAHU/scQpbePvGMEQIjih2KCc8CXAoAxvgh4m0bwr8efGt74i1GDT7WQXkKSTEgFzdIQPrhT+VAHb63pH7P+t6zfapqGt273l7O9xMy3sqguxJJAHTk0AaHgv/AIUX4M16PWNA161hvo0ZFd7uVxhhg8HigDg/DGr2Gu/tgrqWkXUd3YzysY5o/usBb4OPxBoA2P25/wDmSf8At+/9t6APfvilpOg634LvbDxZefY9HkaMyzeaI9pDgr8x6cgUAeE/8Ks+B3/Q1j/wZJ/hQAf8Ks+B3/Q1j/wZJ/hQBsWHwG+FWoaRPqtjq13PpsG7zbmO9UxptGWyccYHNAHR+CR8L/BvhfU9B0fxVZGx1Bnabzr5GbLIEOD24FAEXgZfhp4C0PWLHw14ns5DfqSVlvVkZm2kADp60AeAfD6X4n/D6bVH8P8Ahi8ZL4jzGmsncYGcY6etAG/+yf4k03RPGXii58Saha6c1xAObhxGC/mZIGaAPS/FHwU+GCGTxBrmq3NrBqU5mWd7xUjdpMv8pI7jJHtQBVvvgN8KrDR7fVr3VruDTLjb5VzJfKI33DK4OMHI5oALj4DfCm20SPWLjVruPSpMFLtr1RG2eBhsY5oA6j4bfBnwPomq6f4p8K3d3dNHuMEv2kSRtkFT0HPegDzj9uf/AJkn/t9/9t6APf8A4o+HtK8U+C73SdfvjYadM0ZknDqm0q4I5bjkgCgD5x+JPwH8J+H/AIa6v4m0LWb2+a1jDxHzEeNz5iqeVHuaAPCPhxoVv4m8daHol5JJHb310kDvHjcoPcZoA+jtXtb/AOHGox/DPRrOe58Iawqm+1SeNi1us58uU7x8g2qoPPTvQB4r8cvB2geC/EdjY+F9VOp2k1oJpJTKkm197DbleOgB/GgDZ+BngXwz4p03VdQ8QaybC8sJFa2iEyJ5pA3dG5PIA4oA+hvhF8T9V15dWh8b2tpocduqramYNB53UHG889unrQB8aeLNK1Cx1W8nvbG6t4JriQxySxMqv8xPBI54oA+zda0jwd8QfhX4W0bW/ElraLawWtx+6uo1cOsGzac/7x/KgDkP2k59CsfgTo2gaJq9rfDT7m1gQJOjyFEiddxCn6UAcR8KPEt18UrDSvhXrMUVtosVuWFzbZ8790Ny9cjk9eKAPRfh/wCM77wl8WLT4T2MMEuh2RaNLmXPnkGMy8kHHU46dKAMH9uf/mSf+37/ANt6APU/2o4pJ/gtrUcMbySGSDCopJP71e1AHy9a/EjXbf4PzeAB4cZrWRWU3ZD7xmXzPu4x14oA6b4UfDgaX4ET4neddHVdHlkuI9NaLCymM8An73PsKAPd/A/iz/havwx1hPEEcGhT3vn6eYw/zKjRgbwHx/eP5UAeX6t+zJoVroOpahaeKrq5+yW8kwCxRkEqhbBIPtQB578AvhfpXjyK9vtS1x9NlsLiMRxqEPmd+59qAPpj4w/DLTPH0ejrqetNposN3l7Qh8zOP7xHpQA/4tfDTS/Hfh7RtN1LWm06GwbdHKoU+Z8m3ufTmgD5v+M3wX0zwN4btNR0PXLjWbma7W3aBY1O1Sjtu+Uk9VA/GgCr42+DMXh74R6H4utb29ub7UFtzJZmAYj8yMuenPBGOaAD9k2N4vjXZJIjJItrcAqwwQdlAH03F8IbSP4vP4+GqXBu2ct9k8tdn+r2feznpzQB5N+3P/zJP/b7/wC29AH1S+3b8+NvvQBHmD1j/SgBd0OMbo8emRQB4l8YfgfH8RPFiayviFdOC2yW/kiHfnaWOc7h/e/SgDS8FfDofDb4WeK9MGqf2l9oiuLjzPL2bf3G3GMn+7n8aAPhOxme3vIZ0VmEUiuQO+DmgD6ftZW/aTjVTnw//YChuD5/nb/++cY2+/WgB0c7ftCsfC3Ohf8ACOfP9oB87z8fu+ny46Z6mgBJPDC/s2j/AISv7aPERvj/AGX9lK+Rs3fvN+ct08nGMfxUAer+NPimfDnwk0Pxkuji5/tJbdvsnm48vzYy/wB7HOMY6UAeCfAXXj4m/aWn157Y2i3yXM3lFshMp0zgZoA+z1IYZUgj1FAHyr+3P/zJP/b9/wC29AHqX7UkkkPwW1p4nZHEkGGU4P8ArVoA+f8A4a/A3XfHXg6y8QW/isWcV0XAhkWRiu1yvUN7UAdR/wAMveI/+h2i/wC/Un/xVAGV4p/Z28QeH/DWqaxJ4wSeOwtZLlo1jkBcIpbAO7jOKAOy/ZNgn1r4ReKrOS4cy3N3NbrJIS23dboM/TmgDrPhJ8Jm+HPhjxFb6jeWmpvdqZEdYNuzCEY5zQB53+xj/wAfPjP6R/zagCL9kH/ko/jb/rmf/RxoA5D9ob4Van4Pgn8R3utpe2uo6q6x2wRgYt4kkHJJHAXFAHrn7PHxW0/xZbaP4IOiyJLpmlpuuJXV0cxKiZC44zmgD0X4s+BD408HTaPpM9vpd1JLG4uRF0CnJHy4PNAHCfC/x2nhTxTp3wku7Wa81Cy3xvqYkwj5Uy52nnocdaAOO/bn/wCZJ/7ff/begD1D9qn/AJIlrf8A10t//RyUAed+Hria0/YtuZ7WaSCdI5CskbFWX/S+xHIoA+Yf+En1/wD6Dmqf+Bcn+NAH1D8Hr26v/wBlnxrNfXM9zNsv13zSF2x9nXjJ7UARfstO0fwM8bPGxV1muWVlOCCLZORQB598GvjVb+DNB12x8Rrq+qTXx/cuJBIIxtIwd7ZHJ7UAdp+xa4kl8YOOAyxn/wBCoA4D4N/EzTfhn428T3mrWV5dpeFokW225UiQnJ3EUAfSPxm8HXnxe+HWhxaJcW9k0k8OpA3ecBDC42/KDz+8HtwaAPO9G+NXhH4bRw+Gbzw3cyazokY0y6vbSGECaSLCOwYkMQSueefWgDzfw98Zo9O+NOoeLLv+15tCnaZo7AS5KB1wvyltvBoA9c+H3gu98XfFOz+Ldlc28Oi3xaRLObd9oUCMxc4BXqM9elAGB+3P/wAyT/2+/wDtvQB6h+1T/wAkS1v/AK6W/wD6OSgDkfhn4bvfF/7J8eg6ZJbxXd6sqRvcMVQEXJbkgE9AexoA8y/4ZV8b/wDQV8N/+BE//wAZoA9d8OeBdT+Hn7OvjLRtans57pra9uA1o7Mm1oAAMsqnPyntQByv7L3/ACQnxz/11uf/AElWgDI/ZS8P6NrPg/xfLq+k6ffTQsPKe6tklZP3ZPylgcfhQB8+6dresaNeXKaLqt/pwmfa/wBkuHh3c8Z2kZoA+rvgL8D7nw/fX2peNoNA1m2vrZGgVkNwyMTuLESRgA4PUE0AL4u8VTfFaWbwN8MLq/8AD2s6LcNNPPNIbSFoIswmNGhLMfmdCFKgYXsQBQBofDLU/A+ta+fBGq+GLW+8W6VbtHqeo3WnwSx3M8RVJZBKxMjlnJO5lBPU4NAHXfEWz+H3gLwzLrmr+DdKmtI5EjZLXS7dnyxwMBgo/WgDD+Gnxy8F+Idb0/wt4Z0bVNPMu4Qo1rDFAmAWPCSHHQ9B1oA8/wD25ungn/t9/wDbegD2z45+F9R8ZfDXUtE0URG+uHiKCV9i/LIrHJ+gNAHz7o3wk+N2iadFYaPr/wBisos7IINUZEXJycAD1JNAF7/hXXx+/wChrn/8G7/4UAQX3wv+O1/Zz2l74lee1nQxyxSasxV1IwQRjkEUAelfBL4b6/4O+GHibQdZW1F/qDzNAIpd64aBUGTjjkUAeU+FPgp8W/Dchj0rUoLGymkVrmK31EoJFHXIA54yKAO3+N/wLl16LR/+EB0fSLCaHebtl2wbycY5A570AcxF8Nvj3FEkcXimZI0AVVGruAAOg6UAfRHgbwZpXh+0tbxNKsYNektUjvruGMeZNIQpkLP1bLjOe55oA5P4tfDu7udKlvvhra2ekeK7i7Ek+oQMLeWSNtxkBkAycttJHfFAHi2ufCH4169p7WOta6L6zYhmhuNUZ0JHIOCKAPcvgz8MNN8JeF9GfVdF0xfE9qriW9ijVnyWbo+Mn5SBQB5L+3P/AMyT/wBv3/tvQByv/DVfjf8A6BXhr/wHn/8Aj1AB/wANVeN/+gV4a/8AAef/AOPUAH/DVfjf/oFeGv8AwHn/APj1AB/w1X43/wCgV4a/8B5//j1AB/w1V43/AOgV4a/8B5//AI9QAf8ADVXjf/oFeGv/AAHn/wDj1AB/w1V43/6BXhr/AMB5/wD49QAf8NV+N/8AoFeGv/Aef/49QAf8NV+N/wDoFeGv/Aef/wCPUAH/AA1X43/6BXhr/wAB5/8A49QAf8NVeN/+gV4a/wDAef8A+PUAH/DVfjf/AKBXhr/wHn/+PUAef/Ff4q658Tf7L/t61023/s7zfK+xRum7zNm7duds/cGMY70Af//Z',
    func: 'videPluginToolbarQrcode:click'
  })
  // return execute class
  return class videPluginToolbarQrcode extends baseClass {
    click () {
      if (isCreated) {
        this.$destroy()
        isCreated = false
      } else {
        isCreated = true
        let stylePath = path.join(packageInfo.path, './dist/index.css')
        this.$mount({app: App, stylePath})
      }
    }
    $clean () {
      store.dispatch('toolbar/deleteItem', 'videPluginToolbarQrcodeItem')
    }
  }
}
